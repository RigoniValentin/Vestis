### ===========================================
### TEST: Actualización de Eventos - Validación de Fechas
### ===========================================

@baseUrl = http://localhost:3016/api/v1
@adminToken = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY3YjU1NDRmN2Y5M2VkNWEzYjJiY2MzYyIsImVtYWlsIjoiYWRtaW5AZ21haWwuY29tIiwidXNlcm5hbWUiOiJ1c3VhcmlvQWRtaW4iLCJyb2xlcyI6W3siX2lkIjoiNjdiMWY3ZjMwNGZiYTUzODZiNDY4NmE2IiwibmFtZSI6ImFkbWluIiwicGVybWlzc2lvbnMiOlsidXNlcnNfcmVhZCIsInVzZXJzX3dyaXRlIiwidmlkZW9zX3JlYWQiLCJ2aWRlb3Nfd3JpdGUiLCJyb2xlc19yZWFkIiwicm9sZXNfd3JpdGUiLCJ0cmFpbmluZ19yZWFkIiwidHJhaW5pbmdfd3JpdGUiXSwiY3JlYXRlZEF0IjoiMjAyNS0wMi0xNlQxNDozNjozNS4zMjFaIiwidXBkYXRlZEF0IjoiMjAyNS0wMi0xNlQxNDozNjozNS4zMjFaIn1dLCJuYXRpb25hbGl0eSI6IkFyZ2VudGlubyIsImxvY2FsaXR5IjoiQ0FCQSIsImFnZSI6MjUsImNhcFNlcmVzQXJ0ZSI6ZmFsc2UsImNhcFRociI6ZmFsc2UsImNhcFBociI6ZmFsc2UsImNhcE1hdCI6ZmFsc2UsImNhcFVvciI6ZmFsc2UsImNhcFJlaCI6dHJ1ZSwiY2FwVml2Ijp0cnVlLCJjYXBURUxBIjpmYWxzZSwiY2FwTk9fQ09OVkVOQ0lPTkFMIjpmYWxzZSwiY2FwREFOWkFfRFJBR09OIjpmYWxzZSwiY2FwUEFSQURBX01BTk9TIjpmYWxzZSwiY2FwREFOWkFfQUVSRUFfQVJORVMiOmZhbHNlLCJjYXBDVUJPIjpmYWxzZSwiY2FwUE9MRV9BRVJFTyI6ZmFsc2UsImNhcFJFRCI6ZmFsc2UsImNhcENPTlRPUlNJT04iOmZhbHNlLCJjYXBBUk8iOmZhbHNlLCJjYXBBQ1JPX1RSQUlOSU5HIjpmYWxzZSwiaWF0IjoxNzM0NzAzMjIyLCJleHAiOjE3MzQ3MTQwMjJ9.7xEJVWCj0fNGqfTcJOb5vDX5CZDwPXKD5cVLKU1qmfI
@eventId = 68a44bb4d2b1ed5804687493

### 1. Primero, crear un evento para probar
POST {{baseUrl}}/events
Authorization: {{adminToken}}
Content-Type: application/json

{
  "title": "Evento de Prueba para Actualizar",
  "description": "Este evento será usado para probar actualizaciones",
  "startDate": "2025-08-19T14:00:00.000Z",
  "endDate": "2025-08-19T15:00:00.000Z",
  "type": "class",
  "category": "Prueba",
  "color": "#3B82F6",
  "location": "Estudio de Prueba",
  "maxParticipants": 10,
  "instructor": "Instructor de Prueba",
  "price": 2500,
  "isRecurring": false
}

### 2. Actualizar evento - CASO VÁLIDO (endDate posterior a startDate)
PUT {{baseUrl}}/events/{{eventId}}
Authorization: {{adminToken}}
Content-Type: application/json

{
  "title": "Evento de Prueba ACTUALIZADO",
  "description": "Descripción actualizada",
  "startDate": "2025-08-19T14:20:00.000Z",
  "endDate": "2025-08-19T15:20:00.000Z",
  "category": "Prueba Actualizada",
  "color": "#48bb78",
  "maxParticipants": 15,
  "price": 3000
}

### 3. Actualizar evento - CASO INVÁLIDO (endDate anterior a startDate)
PUT {{baseUrl}}/events/{{eventId}}
Authorization: {{adminToken}}
Content-Type: application/json

{
  "title": "Evento con Fechas Inválidas",
  "startDate": "2025-08-19T15:00:00.000Z",
  "endDate": "2025-08-19T14:00:00.000Z"
}

### 4. Actualizar evento - CASO INVÁLIDO (endDate igual a startDate)
PUT {{baseUrl}}/events/{{eventId}}
Authorization: {{adminToken}}
Content-Type: application/json

{
  "startDate": "2025-08-19T14:00:00.000Z",
  "endDate": "2025-08-19T14:00:00.000Z"
}

### 5. Actualizar solo startDate (sin endDate)
PUT {{baseUrl}}/events/{{eventId}}
Authorization: {{adminToken}}
Content-Type: application/json

{
  "startDate": "2025-08-19T16:00:00.000Z",
  "title": "Solo actualizando startDate"
}

### 6. Actualizar solo endDate (validación con startDate existente)
PUT {{baseUrl}}/events/{{eventId}}
Authorization: {{adminToken}}
Content-Type: application/json

{
  "endDate": "2025-08-19T17:00:00.000Z",
  "title": "Solo actualizando endDate"
}

### 7. Actualizar solo endDate - CASO INVÁLIDO (anterior al startDate existente)
PUT {{baseUrl}}/events/{{eventId}}
Authorization: {{adminToken}}
Content-Type: application/json

{
  "endDate": "2025-08-19T15:00:00.000Z",
  "title": "EndDate inválido para startDate existente"
}

### 8. Verificar el evento final
GET {{baseUrl}}/events/{{eventId}}

### 9. Eliminar endDate (establecer como null)
PUT {{baseUrl}}/events/{{eventId}}
Authorization: {{adminToken}}
Content-Type: application/json

{
  "endDate": null,
  "title": "Evento sin fecha de fin"
}

###
