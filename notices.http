### ===========================================
### AVISOS IMPORTANTES API - Pruebas Completas
### ===========================================

@baseUrl = http://localhost:3016/api/v1
@adminToken = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2N2I1NTQ0ZjdmOTNlZDVhM2IyYmNjM2MiLCJpYXQiOjE3MzQ2MTU1OTYsImV4cCI6MTczNDcwMTk5Nn0.Zr5ViF6tPEeqFIBwQKnhOb7RkGVPH8-YUeHANz0TLjw
@userToken = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2N2I1NTQ3ZjdmOTNlZDVhM2IyYmNjNDAiLCJpYXQiOjE3MzQ2MTU2MjMsImV4cCI6MTczNDcwMjAyM30.rvjJk-q_S9FTqZfzpqlr7IZwI_rD1BYr3qV0m8Z4hgc

### ===========================================
### RUTAS PARA USUARIOS AUTENTICADOS
### ===========================================

### 1. Obtener avisos activos (cualquier usuario autenticado)
GET {{baseUrl}}/notices/active
Authorization: {{userToken}}

### 2. Obtener avisos urgentes activos
GET {{baseUrl}}/notices/urgent
Authorization: {{userToken}}

### ===========================================
### RUTAS ADMIN (Requieren autenticación + rol admin)
### ===========================================

### 3. Obtener todos los avisos (admin)
GET {{baseUrl}}/notices
Authorization: {{adminToken}}

### 4. Obtener todos los avisos con filtros
GET {{baseUrl}}/notices?type=warning&isActive=true&includeExpired=false&limit=10
Authorization: {{adminToken}}

### 5. Obtener estadísticas de avisos
GET {{baseUrl}}/notices/admin/stats
Authorization: {{adminToken}}

### 6. Crear aviso de información general
POST {{baseUrl}}/notices
Authorization: {{adminToken}}
Content-Type: application/json

{
  "title": "Nueva funcionalidad disponible",
  "message": "Ahora puedes ver tu cronograma de entrenamientos en tiempo real. Explora las nuevas características en tu panel de usuario.",
  "type": "success",
  "isActive": true
}

### 7. Crear aviso de advertencia con fechas
POST {{baseUrl}}/notices
Authorization: {{adminToken}}
Content-Type: application/json

{
  "title": "Aumento de precios de suscripción",
  "message": "A partir del 1 de septiembre, los precios de la suscripción mensual aumentarán. Consulta los nuevos precios en la sección de pagos.",
  "type": "warning",
  "isActive": true,
  "startDate": "2025-08-25T00:00:00.000Z",
  "endDate": "2025-09-01T23:59:59.000Z"
}

### 8. Crear aviso urgente
POST {{baseUrl}}/notices
Authorization: {{adminToken}}
Content-Type: application/json

{
  "title": "Cancelación de clases por mantenimiento",
  "message": "Las clases del día martes 20 de agosto están canceladas debido a trabajos de mantenimiento en el estudio. Las clases se reprogramarán para el jueves.",
  "type": "urgent",
  "isActive": true,
  "startDate": "2025-08-19T00:00:00.000Z",
  "endDate": "2025-08-20T23:59:59.000Z"
}

### 9. Crear aviso informativo programado (para mostrar en el futuro)
POST {{baseUrl}}/notices
Authorization: {{adminToken}}
Content-Type: application/json

{
  "title": "Workshop especial de técnicas avanzadas",
  "message": "El próximo mes tendremos un workshop especial para técnicas avanzadas de Pilates. Las inscripciones abren pronto.",
  "type": "info",
  "isActive": true,
  "startDate": "2025-08-25T00:00:00.000Z",
  "endDate": "2025-09-15T23:59:59.000Z"
}

### 10. Obtener aviso por ID
GET {{baseUrl}}/notices/66b12345678901234567890a
Authorization: {{adminToken}}

### 11. Actualizar aviso existente
PUT {{baseUrl}}/notices/66b12345678901234567890a
Authorization: {{adminToken}}
Content-Type: application/json

{
  "title": "Aumento de precios de suscripción - ACTUALIZADO",
  "message": "ACTUALIZACIÓN: El aumento de precios se pospone hasta el 15 de septiembre para dar más tiempo a nuestros usuarios.",
  "type": "warning",
  "endDate": "2025-09-15T23:59:59.000Z"
}

### 12. Alternar estado del aviso (activar/desactivar)
PATCH {{baseUrl}}/notices/66b12345678901234567890a/toggle
Authorization: {{adminToken}}

### 13. Eliminar aviso permanentemente
DELETE {{baseUrl}}/notices/66b12345678901234567890a
Authorization: {{adminToken}}

### 14. Limpiar avisos expirados automáticamente
POST {{baseUrl}}/notices/admin/cleanup
Authorization: {{adminToken}}

### ===========================================
### CASOS DE ERROR
### ===========================================

### 15. Intentar crear aviso sin autenticación
POST {{baseUrl}}/notices
Content-Type: application/json

{
  "title": "Aviso Sin Auth",
  "message": "Este aviso no debería crearse",
  "type": "info"
}

### 16. Intentar ver avisos admin con token de usuario
GET {{baseUrl}}/notices
Authorization: {{userToken}}

### 17. Crear aviso con datos inválidos
POST {{baseUrl}}/notices
Authorization: {{adminToken}}
Content-Type: application/json

{
  "title": "",
  "message": "",
  "type": "tipo-invalido"
}

### 18. Crear aviso con fechas inválidas
POST {{baseUrl}}/notices
Authorization: {{adminToken}}
Content-Type: application/json

{
  "title": "Aviso con fechas inválidas",
  "message": "Este aviso tiene fechas incorrectas",
  "type": "warning",
  "startDate": "2025-08-25T00:00:00.000Z",
  "endDate": "2025-08-20T00:00:00.000Z"
}

### 19. Actualizar aviso inexistente
PUT {{baseUrl}}/notices/000000000000000000000000
Authorization: {{adminToken}}
Content-Type: application/json

{
  "title": "Aviso que no existe"
}

### 20. Eliminar aviso inexistente
DELETE {{baseUrl}}/notices/000000000000000000000000
Authorization: {{adminToken}}

### ===========================================
### CASOS DE USO ESPECÍFICOS
### ===========================================

### 21. Crear aviso de mantenimiento programado
POST {{baseUrl}}/notices
Authorization: {{adminToken}}
Content-Type: application/json

{
  "title": "Mantenimiento programado del sistema",
  "message": "El sistema estará en mantenimiento el domingo de 2:00 AM a 6:00 AM. Durante este tiempo, algunas funciones pueden no estar disponibles.",
  "type": "info",
  "isActive": true,
  "startDate": "2025-08-24T02:00:00.000Z",
  "endDate": "2025-08-24T06:00:00.000Z"
}

### 22. Crear aviso de promoción especial
POST {{baseUrl}}/notices
Authorization: {{adminToken}}
Content-Type: application/json

{
  "title": "¡Promoción especial por tiempo limitado!",
  "message": "Obtén 20% de descuento en tu primera suscripción anual. Oferta válida hasta fin de mes. ¡No te la pierdas!",
  "type": "success",
  "isActive": true,
  "startDate": "2025-08-19T00:00:00.000Z",
  "endDate": "2025-08-31T23:59:59.000Z"
}

### 23. Crear aviso de cambio de instructor
POST {{baseUrl}}/notices
Authorization: {{adminToken}}
Content-Type: application/json

{
  "title": "Cambio temporal de instructor",
  "message": "Las clases de los miércoles serán dictadas por la instructora María durante las próximas dos semanas debido a vacaciones de Sarah.",
  "type": "warning",
  "isActive": true,
  "startDate": "2025-08-21T00:00:00.000Z",
  "endDate": "2025-09-04T23:59:59.000Z"
}

###
